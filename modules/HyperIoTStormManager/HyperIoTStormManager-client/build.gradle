version = '1.0.0'

dependencies {
	//OSGi Basic Imports

	compileOnly group: "org.osgi", name: "org.osgi.core", version: "6.0.0"
	compileOnly group: "org.osgi", name: "org.osgi.compendium", version: "5.0.0"
	compileOnly group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.6'
	compileOnly group: "it.acsoftware.hyperiot.base", name: "HyperIoTBase-model", version:project.hyperIoTVersion

	//STORM DEPENDENCY
	// https://mvnrepository.com/artifact/org.apache.storm/flux-core
	compile "org.apache.storm:storm-core:1.2.2"
	compileOnly group: 'org.apache.storm', name: 'flux-core', version: '1.2.2'
	//HyperIoT Storm Topology
	compileOnly group: 'it.acsoftware.hyperiot.storm.topology',name:"storm-kafkatopic-topology",version:"1.0.0"
	//configurations.compile.extendsFrom(configurations.extraLibs)
	compileOnly group: "it.acsoftware.hyperiot.base", name: "HyperIoTBase-util", version:project.hyperIoTVersion
	compileOnly project(":modules:HyperIoTStormManager:HyperIoTStormManager-api")
}

jar {
	manifest {
		attributes('dsannotations': '*')
	}
	zip64 true
	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

task buildHIT(type: GradleBuild) {
	tasks = [ 'clean','build','install' ]
}

task publishHIT(type: GradleBuild) {
	tasks = [ 'clean','build','install','publish' ]
}


publishing {
    	publications {
        	hyperiot(MavenPublication) {
            	from components.java
        	}
    }
 }